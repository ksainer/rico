let selectAll=document.body.querySelectorAll(".select");selectAll.forEach(e=>{let t=e.querySelector(".select__current-val .select__text"),c=e.querySelectorAll(".select__radio"),l=0,o=e.querySelector(".select__check"),n=e.querySelector(".select__list");function i(){o.checked=!0,n.hidden=!1,c[l].checked=!0,c[l].focus()}function a(){o.checked=!1,n.hidden=!0,o.focus()}o.onkeydown=function(e){13===e.keyCode&&i(),40===e.keyCode&&(e.preventDefault(),c[l+1]&&c[++l].click()),38===e.keyCode&&(e.preventDefault(),c[l-1]&&c[--l].click())},o.onchange=function(){this.checked?i():a()},c.forEach((e,c)=>{e.onchange=function(){t.textContent=this.parentElement.querySelector(".select__text").textContent},e.onclick=function(e){t.textContent=this.parentElement.querySelector(".select__text").textContent,l=c,e.clientX&&this.checked&&a()},e.onkeydown=function(e){13!==e.keyCode&&27!==e.keyCode&&9!==e.keyCode||a()}}),document.addEventListener("click",function(t){e.contains(t.target)||n.hidden||a()})});let arr=[[{800:{1000:2194,1200:2424,1300:2654,1400:2884,1500:3113},900:{1000:2414,1200:2666,1300:2918,1400:3170,1500:3422},1000:{1000:2636,1200:2910,1300:3184,1400:3458,1500:3732},1100:{1000:2857,1200:3153,1300:3449,1400:3745,1500:4041},1200:{1000:3078,1200:3096,1300:3714,1400:4062,1500:4350}},{800:{1000:4196,1200:4488,1300:4780,1400:5072,1500:5364},900:{1000:4650,1200:4964,1300:5278,1400:5592,1500:5906},1000:{1000:4914,1200:5250,1300:5586,1400:5922,1500:6258},1100:{1000:5179,1200:5537,1300:5895,1400:6253,1500:6611},1200:{1000:5442,1200:5822,1300:6202,1400:6582,1500:6962}}],[{1100:{1100:3498,1200:3757,1300:4016,1400:4275,1500:4534,1600:4793},1200:{1100:3737,1200:4014,1300:4291,1400:4568,1500:4845,1600:5122},1300:{1100:3974,1200:4269,1300:4564,1400:4859,1500:5154,1600:5447},1400:{1100:4212,1200:4524,1300:4836,1400:5148,1500:5460,1600:5771},1500:{1100:4450,1200:4779,1300:5108,1400:5437,1500:5766,1600:6096},1600:{1100:4688,1200:5035,1300:5382,1400:5729,1500:6067,1600:6422}},{1100:{1100:5196,1200:5531,1300:5866,1400:6201,1500:6536,1600:6872},1200:{1100:5463,1200:5814,1300:6165,1400:6516,1500:6867,1600:7220},1300:{1100:5713,1200:6034,1300:6355,1400:6676,1500:6997,1600:7318},1400:{1100:5914,1200:6314,1300:6714,1400:7114,1500:7514,1600:7912},1500:{1100:6459,1200:6854,1300:7249,1400:7644,1500:8039,1600:8435},1600:{1100:6906,1200:7319,1300:7732,1400:8145,1500:8558,1600:8971}},{1100:{1100:7355,1200:7755,1300:8155,1400:8555,1500:8955,1600:9355},1200:{1100:7654,1200:8068,1300:8482,1400:8896,1500:9310,1600:9726},1300:{1100:7951,1200:8379,1300:8807,1400:9235,1500:9663,1600:10093},1400:{1100:8019,1200:8495,1300:8971,1400:9447,1500:9923,1600:10397},1500:{1100:8692,1200:9163,1300:9634,1400:10105,1500:10576,1600:11047},1600:{1100:9349,1200:9839,1300:10329,1400:10819,1500:11309,1600:11794}}],[{1700:{1500:9265,1600:9789,1700:10313,1800:10836},1800:{1500:9587,1600:10129,1700:10671,1800:11211},1900:{1500:9907,1600:10467,1700:11027,1800:11588},2000:{1500:10230,1600:10808,1700:11386,1800:11963},2100:{1500:10510,1600:11104,1700:11698,1800:12291},2200:{1500:10935,1600:11541,1700:12147,1800:12754}}]],types=[["KBE Engine","KBE Expert"],["REHAU Engine","REHAU Expert"],["MONTBLANK Engine","MONTBLANK Expert"]],arrCoef=[1,1.4,1.5],arrCoef2=[[1,1.4],[1,1.5],[1,1.4]],w=800,h=1e3,coef1=0,coef2=0,count=0,type=[0,0,0],topLine=document.body.querySelector(".calculate__top-line"),width=topLine.querySelector(".calculate__size .calculate__width"),height=topLine.querySelector(".calculate__size .calculate__height"),selectListText=topLine.querySelectorAll(".select__list .select__text"),selectListRadio=topLine.querySelectorAll(".select__list .select__radio"),cost=document.body.querySelector(".calculate__t-cost"),avarCost=document.body.querySelector(".calculate__a-cost");function calc(){let e=arr[count][type[count]],t=Object.keys(e);w=Math.max(w,t[0]),e[w=Math.min(w,t[t.length-1])]?width.value=w:w=height.value=t[0];let c=Object.keys(e[w]);h=Math.max(h,c[0]),h=Math.min(h,c[c.length-1]),e[w][h]?height.value=h:h=height.value=c[0],cost.textContent=Math.round(e[w][h]*arrCoef[coef1]*arrCoef2[coef1][coef2]),avarCost.textContent=Math.round(e[w][h]*arrCoef[coef1]*arrCoef2[coef1][coef2]*1.2)}calc(),width.oninput=function(){arr[count][type[count]][this.value]&&(w=this.value,calc())},width.onblur=function(){let e=Object.keys(arr[count][type[count]]);if(!arr[count][type[count]][this.value]){for(let t=0;t<e.length;t++)if(+this.value<e[t])return void(w=this.value=e[t]);w=this.value=e[e.length-1]}},height.oninput=function(){arr[count][type[count]][w][this.value]&&(h=this.value,calc())},height.onblur=function(){let e=Object.keys(arr[count][type[count]][w]);if(!arr[count][type[count]][w][this.value]){for(let t=0;t<e.length;t++)if(+this.value<e[t])return void(h=this.value=e[t]);h=this.value=e[e.length-1]}};let prods=topLine.querySelectorAll('input[name="prod"]');prods.forEach((e,t)=>{e.onchange=function(){coef1=t,coef2=0,calc(),selectListText.forEach((e,c)=>{e.textContent=types[t][c]}),selectListRadio[0].click()}}),selectListRadio.forEach((e,t)=>{e.addEventListener("change",()=>{coef2=t,calc()}),e.addEventListener("click",()=>{coef2=t,calc()})});let countSection=document.body.querySelector(".calculate__count-section"),countSectionItems=countSection.querySelectorAll(".calculate__c-item"),arrImg=["img__blind","img__turn","img__turn-folding"];countSectionItems.forEach((e,t)=>{let c=sel2=0;e.querySelector(".calculate__c-radio").addEventListener("change",function(){let e=arr[count=t][type[count]],c=Object.keys(e),l=Object.keys(e[c[0]]);width.setAttribute("min",c[0]),width.setAttribute("max",c[c.length-1]),height.setAttribute("min",l[0]),height.setAttribute("max",l[l.length-1]),calc()});let l=e.querySelectorAll(".select__list"),o=e.querySelectorAll(".calculate__wrap-c-img");l.forEach((e,n)=>{e.querySelectorAll(".select__radio").forEach((e,i)=>{e.addEventListener("click",function(){if(o[n].className="calculate__wrap-c-img img__blind",o[n].classList.add(arrImg[i]),0===t)type[0]=i;else if(1===t){if(0===n){let e=l[1].querySelectorAll(".select__radio");sel2=i,0===i?(e[0].disabled=!1,e[1].disabled=!1,e[2].disabled=!0):1===i?(e[0].disabled=!1,e[1].disabled=!0,e[2].disabled=!1):(e[0].disabled=!0,e[1].disabled=!1,e[2].disabled=!0)}else if(1===t&&1===n){let e=l[0].querySelectorAll(".select__radio");c=i,0===i?(e[0].disabled=!1,e[1].disabled=!1,e[2].disabled=!0):1===i?(e[0].disabled=!1,e[1].disabled=!0,e[2].disabled=!1):(e[0].disabled=!0,e[1].disabled=!1,e[2].disabled=!0)}type[1]=c+sel2,type[1]>2&&(type[1]=2)}calc()})})})});